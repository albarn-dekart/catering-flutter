query GetDeliveries($first: Int, $after: String) {
    deliveries(first: $first, after: $after) {
        edges {
            node {
                id
                status
                deliveryDate
                order {
                    id
                    total
                    customer {
                        id
                        email
                    }
                }
                driver {
                    id
                    email
                }
            }
        }
        pageInfo {
            hasNextPage
            endCursor
        }
    }
}

# For drivers - includes their deliveries
query GetUserDeliveries($id: ID!, $first: Int, $after: String) {
    user(id: $id) {
        id
        deliveries(first: $first, after: $after) {
            edges {
                node {
                    id
                    status
                    deliveryDate
                    restaurant {
                        id
                        name
                    }
                    order {
                        id
                        total
                        customer {
                            id
                            email
                        }
                        deliveryFirstName
                        deliveryLastName
                        deliveryPhoneNumber
                        deliveryStreet
                        deliveryApartment
                        deliveryCity
                        deliveryZipCode
                    }
                }
            }
            pageInfo {
                hasNextPage
                endCursor
            }
        }
    }
}

query GetDelivery($id: ID!) {
    delivery(id: $id) {
        id
        status
        deliveryDate
        order {
            id
            total
            customer {
                id
                email
            }
        }
        driver {
            id
            email
        }
    }
}

query GetDeliveriesByRestaurant($restaurantId: ID!, $first: Int, $after: String) {
    restaurant(id: $restaurantId) {
        id
        deliveries(first: $first, after: $after) {
            edges {
                node {
                    id
                    status
                    deliveryDate
                    order {
                        id
                        total
                        customer {
                            id
                            email
                        }
                    }
                    driver {
                        id
                        email
                    }
                }
            }
            pageInfo {
                hasNextPage
                endCursor
            }
        }
    }
}

mutation UpdateDelivery($input: updateDeliveryInput!) {
    updateDelivery(input: $input) {
        delivery {
            id
            status
        }
    }
}

mutation DeleteDelivery($input: deleteDeliveryInput!) {
    deleteDelivery(input: $input) {
        delivery {
            id
        }
    }
}
