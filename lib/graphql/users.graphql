# import "meals.graphql"

# Get drivers for a restaurant (for restaurant owners)
query GetDriversByRestaurant($id: ID!, $search: String) {
    restaurant(id: $id) {
        id
        drivers(search: $search) {
            edges {
                node {
                    id
                    email
                    roles
                }
            }
        }
    }
}

query GetUsers($first: Int, $after: String, $search: String, $role: String) {
    users(first: $first, after: $after, search: $search, role: $role) {
        edges {
            node {
                id
                email
                roles
                ownedRestaurant {
                    id
                }
            }
        }
        pageInfo {
            hasNextPage
            endCursor
        }
    }
}

# Basic user info for all roles (especially customers)
query GetUser($id: ID!) {
    user(id: $id) {
        id
        email
        roles
    }
}

mutation UpdateUser($input: updateUserInput!) {
    updateUser(input: $input) {
        user {
            id
            email
            roles
        }
    }
}

mutation DeleteUser($input: deleteUserInput!) {
    deleteUser(input: $input) {
        user {
            id
        }
    }
}

query GetMyCustomMealPlans($id: ID!, $search: String) {
    user(id: $id) {
        id
        customMealPlans(search: $search) {
            edges {
                node {
                    ...MealPlanSummaryFragment
                }
            }
        }
    }
}
